<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R for Pharmaceutical Sciences</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="This book will teach you how to do data science with R">
  <meta name="generator" content="bookdown 0.0.71 and GitBook 2.6.7">

  <meta property="og:title" content="R for Pharmaceutical Sciences" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://www.devinpastoor.com/r-pharmsciences/" />
  
  <meta property="og:description" content="This book will teach you how to do data science with R" />
  <meta name="github-repo" content="dpastoor/r-pharmsciences" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R for Pharmaceutical Sciences" />
  <meta name="twitter:site" content="@devinpastoor" />
  <meta name="twitter:description" content="This book will teach you how to do data science with R" />
  

<meta name="author" content="Devin Pastoor">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="intro-to-data-manipulation.html">
<link rel="next" href="control-structures.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="r-pharmsciences.css" type="text/css" />
</head>

<body>


  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">R for Pharmaceutical Sciences </a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#how-to-read-this-book"><i class="fa fa-check"></i><b>0.1</b> How to read this book</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro-to-data-manipulation.html"><a href="intro-to-data-manipulation.html"><i class="fa fa-check"></i><b>1</b> Intro to Data Manipulation</a><ul>
<li class="chapter" data-level="1.1" data-path="intro-to-data-manipulation.html"><a href="intro-to-data-manipulation.html#subsetting"><i class="fa fa-check"></i><b>1.1</b> Subsetting</a><ul>
<li class="chapter" data-level="1.1.1" data-path="intro-to-data-manipulation.html"><a href="intro-to-data-manipulation.html#try-it-yourself"><i class="fa fa-check"></i><b>1.1.1</b> Try it yourself</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="intro-to-data-manipulation.html"><a href="intro-to-data-manipulation.html#logical-subsetting"><i class="fa fa-check"></i><b>1.2</b> Logical Subsetting</a></li>
<li class="chapter" data-level="1.3" data-path="intro-to-data-manipulation.html"><a href="intro-to-data-manipulation.html#common-subsetting-situations-and-some-useful-functions"><i class="fa fa-check"></i><b>1.3</b> Common Subsetting Situations and Some Useful Functions</a><ul>
<li class="chapter" data-level="1.3.1" data-path="intro-to-data-manipulation.html"><a href="intro-to-data-manipulation.html#pop-quiz-question"><i class="fa fa-check"></i><b>1.3.1</b> Pop quiz question</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="intro-to-data-manipulation.html"><a href="intro-to-data-manipulation.html#data-manipulation"><i class="fa fa-check"></i><b>1.4</b> Data Manipulation</a></li>
<li class="chapter" data-level="1.5" data-path="intro-to-data-manipulation.html"><a href="intro-to-data-manipulation.html#renaming-columns"><i class="fa fa-check"></i><b>1.5</b> renaming columns</a></li>
<li class="chapter" data-level="1.6" data-path="intro-to-data-manipulation.html"><a href="intro-to-data-manipulation.html#reordering-rowscolumns"><i class="fa fa-check"></i><b>1.6</b> reordering rows/columns</a></li>
<li class="chapter" data-level="1.7" data-path="intro-to-data-manipulation.html"><a href="intro-to-data-manipulation.html#keys"><i class="fa fa-check"></i><b>1.7</b> Keys</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="core-r.html"><a href="core-r.html"><i class="fa fa-check"></i><b>2</b> Core R</a><ul>
<li class="chapter" data-level="2.1" data-path="core-r.html"><a href="core-r.html#data-structures"><i class="fa fa-check"></i><b>2.1</b> Data Structures</a></li>
<li class="chapter" data-level="2.2" data-path="core-r.html"><a href="core-r.html#vectors"><i class="fa fa-check"></i><b>2.2</b> Vectors</a></li>
<li class="chapter" data-level="2.3" data-path="core-r.html"><a href="core-r.html#coercion"><i class="fa fa-check"></i><b>2.3</b> Coercion</a><ul>
<li class="chapter" data-level="2.3.1" data-path="core-r.html"><a href="core-r.html#coercion-chain"><i class="fa fa-check"></i><b>2.3.1</b> Coercion chain</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="core-r.html"><a href="core-r.html#attributes"><i class="fa fa-check"></i><b>2.4</b> Attributes</a></li>
<li class="chapter" data-level="2.5" data-path="core-r.html"><a href="core-r.html#lists"><i class="fa fa-check"></i><b>2.5</b> Lists</a></li>
<li class="chapter" data-level="2.6" data-path="core-r.html"><a href="core-r.html#data-frames"><i class="fa fa-check"></i><b>2.6</b> Data Frames</a></li>
<li class="chapter" data-level="2.7" data-path="core-r.html"><a href="core-r.html#creation-vs-coercion"><i class="fa fa-check"></i><b>2.7</b> Creation vs Coercion</a></li>
<li class="chapter" data-level="2.8" data-path="core-r.html"><a href="core-r.html#combining-data-structuresobjects"><i class="fa fa-check"></i><b>2.8</b> Combining Data Structures/Objects</a></li>
<li class="chapter" data-level="2.9" data-path="core-r.html"><a href="core-r.html#one-last-combining-catch"><i class="fa fa-check"></i><b>2.9</b> One last combining catch</a></li>
<li class="chapter" data-level="2.10" data-path="core-r.html"><a href="core-r.html#factors"><i class="fa fa-check"></i><b>2.10</b> Factors</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="control-structures.html"><a href="control-structures.html"><i class="fa fa-check"></i><b>3</b> Control Structures</a><ul>
<li class="chapter" data-level="3.1" data-path="control-structures.html"><a href="control-structures.html#if-statements"><i class="fa fa-check"></i><b>3.1</b> IF statements</a></li>
<li class="chapter" data-level="3.2" data-path="control-structures.html"><a href="control-structures.html#else"><i class="fa fa-check"></i><b>3.2</b> ELSE</a></li>
<li class="chapter" data-level="3.3" data-path="control-structures.html"><a href="control-structures.html#ifelse"><i class="fa fa-check"></i><b>3.3</b> ifelse</a></li>
<li class="chapter" data-level="3.4" data-path="control-structures.html"><a href="control-structures.html#loops"><i class="fa fa-check"></i><b>3.4</b> Loops</a></li>
<li class="chapter" data-level="3.5" data-path="control-structures.html"><a href="control-structures.html#more-for-loop-information"><i class="fa fa-check"></i><b>3.5</b> more For loop information</a></li>
<li class="chapter" data-level="3.6" data-path="control-structures.html"><a href="control-structures.html#while-loops"><i class="fa fa-check"></i><b>3.6</b> While loops</a></li>
<li class="chapter" data-level="3.7" data-path="control-structures.html"><a href="control-structures.html#assignments"><i class="fa fa-check"></i><b>3.7</b> Assignments</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="writing-functions.html"><a href="writing-functions.html"><i class="fa fa-check"></i><b>4</b> Writing Functions</a><ul>
<li class="chapter" data-level="4.0.1" data-path="writing-functions.html"><a href="writing-functions.html#default-behaviors"><i class="fa fa-check"></i><b>4.0.1</b> Default Behaviors</a></li>
<li class="chapter" data-level="4.0.2" data-path="writing-functions.html"><a href="writing-functions.html#parameter-matching"><i class="fa fa-check"></i><b>4.0.2</b> Parameter Matching</a></li>
<li class="chapter" data-level="4.0.3" data-path="writing-functions.html"><a href="writing-functions.html#passing-on-parameters"><i class="fa fa-check"></i><b>4.0.3</b> Passing on parameters</a></li>
<li class="chapter" data-level="4.0.4" data-path="writing-functions.html"><a href="writing-functions.html#return-values"><i class="fa fa-check"></i><b>4.0.4</b> Return Values</a></li>
<li class="chapter" data-level="4.1" data-path="writing-functions.html"><a href="writing-functions.html#types-of-functions"><i class="fa fa-check"></i><b>4.1</b> Types of Functions</a><ul>
<li class="chapter" data-level="4.1.1" data-path="writing-functions.html"><a href="writing-functions.html#anonymous-functions"><i class="fa fa-check"></i><b>4.1.1</b> Anonymous Functions</a></li>
<li class="chapter" data-level="4.1.2" data-path="writing-functions.html"><a href="writing-functions.html#lists-of-functions"><i class="fa fa-check"></i><b>4.1.2</b> Lists of Functions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="functional-programming.html"><a href="functional-programming.html"><i class="fa fa-check"></i><b>5</b> Functional Programming</a><ul>
<li class="chapter" data-level="5.0.1" data-path="functional-programming.html"><a href="functional-programming.html#assignment-1"><i class="fa fa-check"></i><b>5.0.1</b> Assignment</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="reproducible-research.html"><a href="reproducible-research.html"><i class="fa fa-check"></i><b>6</b> Reproducible Research</a><ul>
<li class="chapter" data-level="6.1" data-path="reproducible-research.html"><a href="reproducible-research.html#importance-of-reproducible-research"><i class="fa fa-check"></i><b>6.1</b> Importance of Reproducible Research</a></li>
<li class="chapter" data-level="6.2" data-path="reproducible-research.html"><a href="reproducible-research.html#best-practices-in-reproducible-research"><i class="fa fa-check"></i><b>6.2</b> “Best” Practices in Reproducible Research</a></li>
<li class="chapter" data-level="6.3" data-path="reproducible-research.html"><a href="reproducible-research.html#reproducible-research-tools"><i class="fa fa-check"></i><b>6.3</b> Reproducible Research Tools</a></li>
<li class="chapter" data-level="6.4" data-path="reproducible-research.html"><a href="reproducible-research.html#in-line-code"><i class="fa fa-check"></i><b>6.4</b> In-line code</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>7</b> Rmarkdown</a><ul>
<li class="chapter" data-level="7.1" data-path="rmarkdown.html"><a href="rmarkdown.html#good-practices"><i class="fa fa-check"></i><b>7.1</b> Good Practices</a></li>
<li class="chapter" data-level="7.2" data-path="rmarkdown.html"><a href="rmarkdown.html#some-gotchas-for-knitting"><i class="fa fa-check"></i><b>7.2</b> Some ‘gotchas’ for knitting</a></li>
<li class="chapter" data-level="7.3" data-path="rmarkdown.html"><a href="rmarkdown.html#extracting-r-code"><i class="fa fa-check"></i><b>7.3</b> Extracting R Code</a></li>
<li class="chapter" data-level="7.4" data-path="rmarkdown.html"><a href="rmarkdown.html#chunk-labels"><i class="fa fa-check"></i><b>7.4</b> Chunk Labels</a></li>
<li class="chapter" data-level="7.5" data-path="rmarkdown.html"><a href="rmarkdown.html#global-options"><i class="fa fa-check"></i><b>7.5</b> Global Options</a></li>
<li class="chapter" data-level="7.6" data-path="rmarkdown.html"><a href="rmarkdown.html#digits-of-output"><i class="fa fa-check"></i><b>7.6</b> Digits of Output</a></li>
<li class="chapter" data-level="7.7" data-path="rmarkdown.html"><a href="rmarkdown.html#showinghiding-output-options"><i class="fa fa-check"></i><b>7.7</b> Showing/Hiding Output Options</a></li>
<li class="chapter" data-level="7.8" data-path="rmarkdown.html"><a href="rmarkdown.html#figures"><i class="fa fa-check"></i><b>7.8</b> Figures</a></li>
<li class="chapter" data-level="7.9" data-path="rmarkdown.html"><a href="rmarkdown.html#adding-tables"><i class="fa fa-check"></i><b>7.9</b> Adding Tables</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="apply-functions.html"><a href="apply-functions.html"><i class="fa fa-check"></i><b>8</b> Apply functions</a><ul>
<li class="chapter" data-level="8.1" data-path="apply-functions.html"><a href="apply-functions.html#lapply"><i class="fa fa-check"></i><b>8.1</b> lapply</a></li>
<li class="chapter" data-level="8.2" data-path="apply-functions.html"><a href="apply-functions.html#additional-apply-style-functions"><i class="fa fa-check"></i><b>8.2</b> Additional apply-style functions</a></li>
<li class="chapter" data-level="8.3" data-path="apply-functions.html"><a href="apply-functions.html#apply"><i class="fa fa-check"></i><b>8.3</b> apply</a></li>
<li class="chapter" data-level="8.4" data-path="apply-functions.html"><a href="apply-functions.html#sapply"><i class="fa fa-check"></i><b>8.4</b> sapply</a></li>
<li class="chapter" data-level="8.5" data-path="apply-functions.html"><a href="apply-functions.html#vapply"><i class="fa fa-check"></i><b>8.5</b> vapply</a></li>
<li class="chapter" data-level="8.6" data-path="apply-functions.html"><a href="apply-functions.html#tapply"><i class="fa fa-check"></i><b>8.6</b> tapply</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="thinking-in-r.html"><a href="thinking-in-r.html"><i class="fa fa-check"></i><b>9</b> Thinking in R</a><ul>
<li class="chapter" data-level="9.1" data-path="thinking-in-r.html"><a href="thinking-in-r.html#memory-allocation"><i class="fa fa-check"></i><b>9.1</b> Memory Allocation</a></li>
<li class="chapter" data-level="9.2" data-path="thinking-in-r.html"><a href="thinking-in-r.html#vectorization"><i class="fa fa-check"></i><b>9.2</b> Vectorization</a></li>
<li class="chapter" data-level="9.3" data-path="thinking-in-r.html"><a href="thinking-in-r.html#vectorization-tips"><i class="fa fa-check"></i><b>9.3</b> Vectorization Tips</a></li>
<li class="chapter" data-level="9.4" data-path="thinking-in-r.html"><a href="thinking-in-r.html#indexing"><i class="fa fa-check"></i><b>9.4</b> Indexing</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="common-commands.html"><a href="common-commands.html"><i class="fa fa-check"></i><b>10</b> Common Commands</a><ul>
<li class="chapter" data-level="10.1" data-path="common-commands.html"><a href="common-commands.html#vocabulary"><i class="fa fa-check"></i><b>10.1</b> Vocabulary</a></li>
<li class="chapter" data-level="10.2" data-path="common-commands.html"><a href="common-commands.html#the-basics"><i class="fa fa-check"></i><b>10.2</b> The basics</a></li>
<li class="chapter" data-level="10.3" data-path="common-commands.html"><a href="common-commands.html#common-data-structures"><i class="fa fa-check"></i><b>10.3</b> Common data structures</a></li>
<li class="chapter" data-level="10.4" data-path="common-commands.html"><a href="common-commands.html#statistics"><i class="fa fa-check"></i><b>10.4</b> Statistics</a></li>
<li class="chapter" data-level="10.5" data-path="common-commands.html"><a href="common-commands.html#working-with-r"><i class="fa fa-check"></i><b>10.5</b> Working with R</a></li>
<li class="chapter" data-level="10.6" data-path="common-commands.html"><a href="common-commands.html#io"><i class="fa fa-check"></i><b>10.6</b> I/O</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="inputoutput.html"><a href="inputoutput.html"><i class="fa fa-check"></i><b>11</b> Input/Output</a><ul>
<li class="chapter" data-level="11.1" data-path="inputoutput.html"><a href="inputoutput.html#fast-io"><i class="fa fa-check"></i><b>11.1</b> Fast I/O</a></li>
<li class="chapter" data-level="11.2" data-path="inputoutput.html"><a href="inputoutput.html#built-in-io"><i class="fa fa-check"></i><b>11.2</b> Built-in I/O</a></li>
<li class="chapter" data-level="11.3" data-path="inputoutput.html"><a href="inputoutput.html#some-tidbits"><i class="fa fa-check"></i><b>11.3</b> Some tidbits</a></li>
<li class="chapter" data-level="11.4" data-path="inputoutput.html"><a href="inputoutput.html#output"><i class="fa fa-check"></i><b>11.4</b> Output</a><ul>
<li class="chapter" data-level="11.4.1" data-path="inputoutput.html"><a href="inputoutput.html#your-task-1"><i class="fa fa-check"></i><b>11.4.1</b> Your task</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="custom-io.html"><a href="custom-io.html"><i class="fa fa-check"></i><b>12</b> Custom I/O</a></li>
<li class="chapter" data-level="13" data-path="pragmatic-programming.html"><a href="pragmatic-programming.html"><i class="fa fa-check"></i><b>13</b> Pragmatic Programming</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Pharmaceutical Sciences</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="core-r" class="section level1">
<h1><span class="header-section-number">2</span> Core R</h1>
<p>The objectives of this section is to take a number of concepts that you use frequently but may have not questioned the ‘why’ that R behaves that way.</p>
<p>The overarching theme in this documentation is to “concisely” present the concept in a way to help you to think “in terms of R” rather than trying to memorize patterns. This will be supplemented by examples to help reinforce the concepts and help you on your journey to become an R-ninja.</p>
<div id="data-structures" class="section level2">
<h2><span class="header-section-number">2.1</span> Data Structures</h2>
<p>R has a number of ways of storing information. The quick way to visualize the possibilities is as such:</p>
<table>
<thead>
<tr class="header">
<th></th>
<th>Homogeneous</th>
<th>Heterogeneous</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1d</td>
<td>Atomic vector</td>
<td>List</td>
</tr>
<tr class="even">
<td>2d</td>
<td>Matrix</td>
<td>Data frame</td>
</tr>
<tr class="odd">
<td>nd</td>
<td>Array</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>Homogeneous</strong> - all elements must be of the same type (mode)</p>
<p><strong>Heterogeneous</strong> - elements can be of different type (mode)</p>
<p>A <strong>Type/Mode</strong> indicates how R stores the information in memory</p>
<ul>
<li>numeric</li>
<li>double</li>
<li>integer</li>
<li>logical</li>
<li>character</li>
<li>list of pointers</li>
<li>function</li>
</ul>
<p>The term <strong>Mode</strong> and <strong>Type</strong> are virtually interchangeable - from here out we will use the term <strong>Type</strong> as it is more commonly discussed. (‘mode’ was inherited mostly from S/S-plus nomenclature/definition)</p>
</div>
<div id="vectors" class="section level2">
<h2><span class="header-section-number">2.2</span> Vectors</h2>
<p>Data structures in R can be boiled down to a Vector. The most basic vector is an atomic vector.</p>
<p>Vectors have 4 key components:</p>
<ul>
<li><em>contents</em> - the information</li>
<li><em>type</em> - what type of information it stores</li>
<li><em>length</em> - how long it is</li>
<li><em>attributes</em> - additional meta data</li>
</ul>
<p>These components can be easily accessed as such:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># example vector</span>
numeric_vector &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)

<span class="co"># access contents by calling the vector by name</span>
numeric_vector
<span class="co">#&gt; [1] 1 2 3</span>

<span class="co"># see vector type</span>
<span class="kw">typeof</span>(numeric_vector)
<span class="co">#&gt; [1] &quot;double&quot;</span>

<span class="co"># check length</span>
<span class="kw">length</span>(numeric_vector)
<span class="co">#&gt; [1] 3</span>

<span class="co"># see additional attributes</span>
<span class="kw">attributes</span>(numeric_vector)
<span class="co">#&gt; NULL</span></code></pre></div>
<p>There are two useful functions for handling data structures: <code>is.*</code> and <code>as.*</code></p>
<ul>
<li><code>is.*</code> is a testing function that returns TRUE or FALSE</li>
<li><code>as.*</code> is a coercion function - it attempts to convert the input to the requested data structure</li>
</ul>
<p>As an example with vectors:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">numeric_vector &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)
<span class="kw">typeof</span>(numeric_vector)
<span class="co">#&gt; [1] &quot;double&quot;</span>
<span class="kw">is.numeric</span>(numeric_vector) <span class="co"># note is.numeric will return TRUE for both doubles and integers</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="kw">is.list</span>(numeric_vector)
<span class="co">#&gt; [1] FALSE</span>

<span class="co">#coerce to list</span>
numeric_vector &lt;-<span class="st"> </span><span class="kw">as.list</span>(numeric_vector)
<span class="kw">typeof</span>(numeric_vector)
<span class="co">#&gt; [1] &quot;list&quot;</span></code></pre></div>
<p><em>tidbit</em> - <code>is.null</code> determines whether an Object is empty (has no content). <code>NULL</code> is often used to represent objects of zero length and is returned by expressions and functions whose value is undefined. Keep <code>is.null</code> filed away for when we get to function writing, as it is an excellent way to control behavior under certain circumstances.</p>
</div>
<div id="coercion" class="section level2">
<h2><span class="header-section-number">2.3</span> Coercion</h2>
<p>Coercion is a tricky topic in R, that will rear its head throughout one’s R career. While it would be extremely difficult to cover all cases in a robust nature, at least understanding a bit of what is going on under the hood can help set expectations, and when odd behavior is occuring think back to For homogeneous vectors, if you attempt to combine elements of different types, it will pick the class of the first element and coerce all others to that type</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="st">&quot;hello&quot;</span>, <span class="dv">1</span>, <span class="ot">FALSE</span>)
<span class="co">#&gt; [1] &quot;hello&quot; &quot;1&quot;     &quot;FALSE&quot;</span></code></pre></div>
<p>Note: If a logical vector is coerced into a numeric TRUE becomes 1 and FALSE becomes 0 - this can be used to ‘count’ the number of TRUE/FALSES easily using sum()</p>
<ul>
<li>vectors can be indexed by position: v[1] refers to the first element of the vector</li>
<li>vectors can be indexed by multiple positions using c() - v[c(1,2)] will return a sub-vector the first and second element of ‘v’</li>
</ul>
<div id="coercion-chain" class="section level3">
<h3><span class="header-section-number">2.3.1</span> Coercion chain</h3>
<p>To help defensively prepare yourself for handling coersion, it is helpful to understand the heirarchy of coersion:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">fac_test &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">&quot;test1&quot;</span>, <span class="st">&quot;test2&quot;</span>))
fac_test
<span class="co">#&gt; [1] test1 test2</span>
<span class="co">#&gt; Levels: test1 test2</span>
<span class="kw">str</span>(<span class="kw">c</span>(fac_test, <span class="dv">1</span>, <span class="ot">TRUE</span>, <span class="st">&quot;1&quot;</span> ))
<span class="co">#&gt;  chr [1:5] &quot;1&quot; &quot;2&quot; &quot;1&quot; &quot;TRUE&quot; &quot;1&quot;</span>
<span class="kw">str</span>(<span class="kw">c</span>(<span class="kw">as.factor</span>(<span class="st">&quot;test&quot;</span>), <span class="dv">1</span>, <span class="ot">TRUE</span>  ))
<span class="co">#&gt;  num [1:3] 1 1 1</span>
<span class="kw">str</span>(<span class="kw">c</span>(<span class="kw">as.factor</span>(<span class="st">&quot;test&quot;</span>), <span class="ot">TRUE</span>  )) ## numerical representation of factor
<span class="co">#&gt;  int [1:2] 1 1</span></code></pre></div>
<p>Whichever is HIGHEST, all others will be converted to match:</p>
<p>character &lt;- numeric &lt;- factor &lt;- boolean</p>
<p>Notice, one other perculiarity of R, in that the factor test1/test2 are converted to values 1 and 2. This behavior will be discussed in more detail later.</p>
</div>
</div>
<div id="attributes" class="section level2">
<h2><span class="header-section-number">2.4</span> Attributes</h2>
<p>Attributes are additional metadata about an object. The most common 3 attributes are: * <code>names()</code> - character vector of element names * <code>dim()</code> - the structure of the object * <code>class()</code> - used to implement an object system (described later)</p>
<p>You can give a vector names in three ways:</p>
<ul>
<li>During creation: <code>x &lt;- c(a = 1, b = 2, c = 3)</code></li>
<li>By modifying a vector in place: <code>x &lt;- 1:3; names(x) &lt;- c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)</code></li>
<li>By creating a modified vector: <code>x &lt;- setNames(1:3, c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;))</code></li>
</ul>
<p><code>dim()</code> passes additional structural information to the vector. Higher level data structures are simply atomic vectors with the addition of the dim() attribute.</p>
<p>This is an important characteristic to remember as it can help conceptualize the implications of what will happen if you are trying to coerce a data structure into a different type.</p>
<p>As vectors are coerced into higher order structures (eg. matrices and arrays) R handles this by default in a column-wise manner.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span>:<span class="dv">6</span>)
a
<span class="co">#&gt;      [,1]</span>
<span class="co">#&gt; [1,]    1</span>
<span class="co">#&gt; [2,]    2</span>
<span class="co">#&gt; [3,]    3</span>
<span class="co">#&gt; [4,]    4</span>
<span class="co">#&gt; [5,]    5</span>
<span class="co">#&gt; [6,]    6</span></code></pre></div>
<p>An element in a matrix can be indexed exactly like an atomic vector</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span>:<span class="dv">6</span>)
a[<span class="dv">2</span>]
<span class="co">#&gt; [1] 2</span>
a[<span class="dv">4</span>]
<span class="co">#&gt; [1] 4</span></code></pre></div>
<p>In addition, R can refer to the dimensionality via:</p>
<p><strong>DS[row, column]</strong></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">1</span>:<span class="dv">6</span>)
<span class="co"># give first row</span>
a[<span class="dv">1</span>,]
<span class="co">#&gt; [1] 1</span>
<span class="co"># give first column</span>
a[,<span class="dv">1</span>]
<span class="co">#&gt; [1] 1 2 3 4 5 6</span></code></pre></div>
<p>Beyond the 3 common attributes, additional attributes can be assigned; however it is important to note that when a vector is modified most attributes beyond the 3 listed above are lost. This rears its head frequently with custom types - for example the <code>haven</code> package, which reads in sas files and will add attributes such as <code>label</code> that are present in SAS, can be lost during convertions due to how R removes attributes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">conc &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">9.62</span>, <span class="fl">3.1</span>, <span class="dv">2</span>, <span class="fl">0.3</span>)
<span class="kw">attr</span>(conc, <span class="st">&quot;units&quot;</span>) &lt;-<span class="st"> &quot;ug/mL&quot;</span>
conc
<span class="co">#&gt; [1] 9.62 3.10 2.00 0.30</span>
<span class="co">#&gt; attr(,&quot;units&quot;)</span>
<span class="co">#&gt; [1] &quot;ug/mL&quot;</span>
<span class="kw">attributes</span>(conc)
<span class="co">#&gt; $units</span>
<span class="co">#&gt; [1] &quot;ug/mL&quot;</span>
conc &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(conc)
conc
<span class="co">#&gt;   conc</span>
<span class="co">#&gt; 1 9.62</span>
<span class="co">#&gt; 2 3.10</span>
<span class="co">#&gt; 3 2.00</span>
<span class="co">#&gt; 4 0.30</span>
<span class="kw">attributes</span>(conc)
<span class="co">#&gt; $names</span>
<span class="co">#&gt; [1] &quot;conc&quot;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $row.names</span>
<span class="co">#&gt; [1] 1 2 3 4</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $class</span>
<span class="co">#&gt; [1] &quot;data.frame&quot;</span></code></pre></div>
<p>In a similar vein, for the package <code>dplyr</code>, which will become a key part of one’s analysis toolkit, columns or vectors with additional attributes actually cause errors as dplyr is conservative, and rather than accidentally stripping key attributes before calculations, dplyr just errors out, so you must manually remove the additional attributes.</p>
<p>Attributes can be removed by setting them to <code>NULL</code>, so for the above example, we can strip the <code>units</code> attribute by setting it to NULL</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">attr</span>(conc, <span class="st">&quot;units&quot;</span>) &lt;-<span class="st"> </span><span class="ot">NULL</span></code></pre></div>
</div>
<div id="lists" class="section level2">
<h2><span class="header-section-number">2.5</span> Lists</h2>
<p>Lists offer the ability to combine objects of different types. They also separate themselves from atomic vectors as they have the capability of <strong>recursion</strong> - Lists can contain nested lists.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">list</span>(<span class="kw">list</span>(<span class="dv">1</span>:<span class="dv">3</span>), <span class="kw">list</span>(<span class="st">&quot;hello&quot;</span>, <span class="st">&quot;there&quot;</span>), <span class="ot">TRUE</span>)
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; [[1]][[1]]</span>
<span class="co">#&gt; [1] 1 2 3</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt; [[2]][[1]]</span>
<span class="co">#&gt; [1] &quot;hello&quot;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]][[2]]</span>
<span class="co">#&gt; [1] &quot;there&quot;</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[3]]</span>
<span class="co">#&gt; [1] TRUE</span></code></pre></div>
<p>To combine multiple lists into one large list, c() will coerce all lists to vectors and vectors to individual elements then combine them.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(<span class="kw">list</span>(<span class="kw">list</span>(<span class="dv">1</span>:<span class="dv">3</span>), <span class="kw">list</span>(<span class="st">&quot;hello&quot;</span>, <span class="st">&quot;there&quot;</span>), <span class="ot">TRUE</span>, <span class="dv">1</span>:<span class="dv">3</span>))
<span class="co">#&gt; List of 4</span>
<span class="co">#&gt;  $ :List of 1</span>
<span class="co">#&gt;   ..$ : int [1:3] 1 2 3</span>
<span class="co">#&gt;  $ :List of 2</span>
<span class="co">#&gt;   ..$ : chr &quot;hello&quot;</span>
<span class="co">#&gt;   ..$ : chr &quot;there&quot;</span>
<span class="co">#&gt;  $ : logi TRUE</span>
<span class="co">#&gt;  $ : int [1:3] 1 2 3</span>
<span class="kw">str</span>(<span class="kw">c</span>(<span class="kw">list</span>(<span class="dv">1</span>:<span class="dv">3</span>), <span class="kw">list</span>(<span class="st">&quot;hello&quot;</span>, <span class="st">&quot;there&quot;</span>), <span class="ot">TRUE</span>, <span class="dv">1</span>:<span class="dv">3</span>))
<span class="co">#&gt; List of 7</span>
<span class="co">#&gt;  $ : int [1:3] 1 2 3</span>
<span class="co">#&gt;  $ : chr &quot;hello&quot;</span>
<span class="co">#&gt;  $ : chr &quot;there&quot;</span>
<span class="co">#&gt;  $ : logi TRUE</span>
<span class="co">#&gt;  $ : int 1</span>
<span class="co">#&gt;  $ : int 2</span>
<span class="co">#&gt;  $ : int 3</span></code></pre></div>
<p>Note: As shown in the examples, the structure of an object can be shown with <code>str</code></p>
</div>
<div id="data-frames" class="section level2">
<h2><span class="header-section-number">2.6</span> Data Frames</h2>
<p>The most commonly used method for storing data is the data frame. At its core, a data frame is a list of equal-length vectors. You can think of it as having the same properties as both a matrix and a list. (This means you can use the properties of both for things like indexing and subsetting)</p>
<p>A couple useful commands for dataframe attributes:</p>
<ul>
<li><code>names()</code></li>
<li><code>colnames()</code></li>
<li><code>rownames()</code></li>
<li><code>length()</code></li>
<li><code>nrow()</code></li>
<li><code>ncol()</code></li>
</ul>
<p>You can easily see how the properties of both 1-dimensional structures (list) and 2-dimensional structures (matrix) come into play.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># can initialize with named vectors</span>
df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">time =</span> <span class="dv">1</span>:<span class="dv">6</span>, <span class="dt">conc =</span> <span class="kw">c</span>(<span class="fl">9.1</span>, <span class="fl">8.5</span>, <span class="fl">7.3</span>, <span class="fl">4.2</span>, <span class="fl">3.8</span>, <span class="fl">2.5</span>), <span class="dt">race =</span> <span class="st">&quot;male&quot;</span>)
## list-like
<span class="co"># length</span>
<span class="kw">length</span>(df)
<span class="co">#&gt; [1] 3</span>
<span class="co"># subset for individual element by index or name like a vector</span>
df[<span class="dv">1</span>]
<span class="co">#&gt;   time</span>
<span class="co">#&gt; 1    1</span>
<span class="co">#&gt; 2    2</span>
<span class="co">#&gt; 3    3</span>
<span class="co">#&gt; 4    4</span>
<span class="co">#&gt; 5    5</span>
<span class="co">#&gt; 6    6</span>
df[<span class="st">&quot;time&quot;</span>]
<span class="co">#&gt;   time</span>
<span class="co">#&gt; 1    1</span>
<span class="co">#&gt; 2    2</span>
<span class="co">#&gt; 3    3</span>
<span class="co">#&gt; 4    4</span>
<span class="co">#&gt; 5    5</span>
<span class="co">#&gt; 6    6</span>

## array-like
<span class="co"># subset by dimension (remember - ds[row, column])</span>
df[<span class="dv">1</span>,]
<span class="co">#&gt;   time conc race</span>
<span class="co">#&gt; 1    1  9.1 male</span>
<span class="kw">colnames</span>(df)
<span class="co">#&gt; [1] &quot;time&quot; &quot;conc&quot; &quot;race&quot;</span>
<span class="kw">nrow</span>(df)
<span class="co">#&gt; [1] 6</span></code></pre></div>
</div>
<div id="creation-vs-coercion" class="section level2">
<h2><span class="header-section-number">2.7</span> Creation vs Coercion</h2>
<p>You can create new data structure with <code>datastructure()</code> - ie <code>data.frame()</code> As mentioned previously, you can coerce an object to a different data structure with <code>as.*</code> - ie: <code>as.data.frame()</code></p>
<p>An additional note when coercing to data frames:</p>
<ul>
<li>a vector will yield a one-column data frame</li>
<li>a list will yield one column for each element; it’s an error if they’re not all the same length</li>
<li>a matrix will yield a data frame with the same number of columns</li>
</ul>
</div>
<div id="combining-data-structuresobjects" class="section level2">
<h2><span class="header-section-number">2.8</span> Combining Data Structures/Objects</h2>
<p>There are a number of ways to combine multiple objects. The simplest are <code>c()</code>, <code>cbind()</code>, and <code>rbind()</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">time &lt;-<span class="st"> </span><span class="dv">1</span>:<span class="dv">6</span>
conc &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">9.1</span>, <span class="fl">8.5</span>, <span class="fl">7.3</span>, <span class="fl">4.2</span>, <span class="fl">3.8</span>, <span class="fl">2.5</span>)
<span class="kw">c</span>(time, conc)
<span class="co">#&gt;  [1] 1.0 2.0 3.0 4.0 5.0 6.0 9.1 8.5 7.3 4.2 3.8 2.5</span>
<span class="kw">rbind</span>(time,conc)
<span class="co">#&gt;      [,1] [,2] [,3] [,4] [,5] [,6]</span>
<span class="co">#&gt; time  1.0  2.0  3.0  4.0  5.0  6.0</span>
<span class="co">#&gt; conc  9.1  8.5  7.3  4.2  3.8  2.5</span>
<span class="kw">cbind</span>(time,conc)
<span class="co">#&gt;      time conc</span>
<span class="co">#&gt; [1,]    1  9.1</span>
<span class="co">#&gt; [2,]    2  8.5</span>
<span class="co">#&gt; [3,]    3  7.3</span>
<span class="co">#&gt; [4,]    4  4.2</span>
<span class="co">#&gt; [5,]    5  3.8</span>
<span class="co">#&gt; [6,]    6  2.5</span></code></pre></div>
<p>While <code>cbind()</code> may seem like an easy option to quickly create df’s be careful of coercion:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(<span class="kw">cbind</span>(time, conc))
<span class="co">#&gt; [1] &quot;matrix&quot;</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(<span class="kw">data.frame</span>(time, conc))
<span class="co">#&gt; [1] &quot;data.frame&quot;</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">time &lt;-<span class="st"> </span><span class="dv">1</span>:<span class="dv">6</span>
conc &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;9.1&quot;</span>, <span class="fl">8.5</span>, <span class="fl">7.3</span>, <span class="fl">4.2</span>, <span class="fl">3.8</span>, <span class="fl">2.5</span>)
<span class="kw">cbind</span>(time,conc)
<span class="co">#&gt;      time conc </span>
<span class="co">#&gt; [1,] &quot;1&quot;  &quot;9.1&quot;</span>
<span class="co">#&gt; [2,] &quot;2&quot;  &quot;8.5&quot;</span>
<span class="co">#&gt; [3,] &quot;3&quot;  &quot;7.3&quot;</span>
<span class="co">#&gt; [4,] &quot;4&quot;  &quot;4.2&quot;</span>
<span class="co">#&gt; [5,] &quot;5&quot;  &quot;3.8&quot;</span>
<span class="co">#&gt; [6,] &quot;6&quot;  &quot;2.5&quot;</span></code></pre></div>
<p>That seems easy to catch, but what about something like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.data.frame</span>(<span class="kw">cbind</span>(time, conc))
<span class="co">#&gt;   time conc</span>
<span class="co">#&gt; 1    1  9.1</span>
<span class="co">#&gt; 2    2  8.5</span>
<span class="co">#&gt; 3    3  7.3</span>
<span class="co">#&gt; 4    4  4.2</span>
<span class="co">#&gt; 5    5  3.8</span>
<span class="co">#&gt; 6    6  2.5</span></code></pre></div>
<p>It prints out to the console looking like numbers but…</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(<span class="kw">as.data.frame</span>(<span class="kw">cbind</span>(time, conc)))
<span class="co">#&gt; &#39;data.frame&#39;:    6 obs. of  2 variables:</span>
<span class="co">#&gt;  $ time: Factor w/ 6 levels &quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,..: 1 2 3 4 5 6</span>
<span class="co">#&gt;  $ conc: Factor w/ 6 levels &quot;2.5&quot;,&quot;3.8&quot;,&quot;4.2&quot;,..: 6 5 4 3 2 1</span></code></pre></div>
<p>They are actually coerced to a matrix of character factors</p>
<p>This is because cbind will create a matrix unless one of the objects is already a data frame.</p>
<p>The best way to avoid this is to be careful when deciding if you want to <em>coerce</em> (as.*) or initialize a new data frame.</p>
<p>A good habit is to just to use data.frame() directly unless you have good reason for the coercion.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># coerce objects together into a data frame</span>
<span class="kw">str</span>(<span class="kw">as.data.frame</span>(<span class="kw">cbind</span>(time, conc)))
<span class="co">#&gt; &#39;data.frame&#39;:    6 obs. of  2 variables:</span>
<span class="co">#&gt;  $ time: Factor w/ 6 levels &quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,..: 1 2 3 4 5 6</span>
<span class="co">#&gt;  $ conc: Factor w/ 6 levels &quot;2.5&quot;,&quot;3.8&quot;,&quot;4.2&quot;,..: 6 5 4 3 2 1</span>
<span class="co"># instead create new data frame</span>
<span class="kw">str</span>(<span class="kw">data.frame</span>(time, conc))
<span class="co">#&gt; &#39;data.frame&#39;:    6 obs. of  2 variables:</span>
<span class="co">#&gt;  $ time: int  1 2 3 4 5 6</span>
<span class="co">#&gt;  $ conc: Factor w/ 6 levels &quot;2.5&quot;,&quot;3.8&quot;,&quot;4.2&quot;,..: 6 5 4 3 2 1</span></code></pre></div>
<p>Likewise, the safest way to use cbind() is to ensure all objects are of the same type or already a higher level data structure such as a dataframe.</p>
</div>
<div id="one-last-combining-catch" class="section level2">
<h2><span class="header-section-number">2.9</span> One last combining catch</h2>
<p>That is, what happens if vectors being combined to are of <em>unequal length</em>?</p>
<p>R handles this through something called a <em>Recycling Rule</em>.</p>
<p>When R performs operations, it does so element-by-element. When combining multiple vecotrs it does so in pairs. When R reaches the end of the shorter vector it starts over from the first element and keeps filling to the length of the longer vector.</p>
<p>This can be convenient when you want to add a new column with a single value:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">id &lt;-<span class="st"> </span><span class="dv">1</span>:<span class="dv">6</span>
race &lt;-<span class="st"> &quot;caucasian&quot;</span>
<span class="kw">data.frame</span>(id, race)
<span class="co">#&gt;   id      race</span>
<span class="co">#&gt; 1  1 caucasian</span>
<span class="co">#&gt; 2  2 caucasian</span>
<span class="co">#&gt; 3  3 caucasian</span>
<span class="co">#&gt; 4  4 caucasian</span>
<span class="co">#&gt; 5  5 caucasian</span>
<span class="co">#&gt; 6  6 caucasian</span></code></pre></div>
<p>But can be dangerous and lead to unintended behavior:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">id &lt;-<span class="st"> </span><span class="dv">1</span>:<span class="dv">6</span>
race &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;caucasian&quot;</span>, <span class="st">&quot;black&quot;</span>)
<span class="kw">data.frame</span>(id, race)
<span class="co">#&gt;   id      race</span>
<span class="co">#&gt; 1  1 caucasian</span>
<span class="co">#&gt; 2  2     black</span>
<span class="co">#&gt; 3  3 caucasian</span>
<span class="co">#&gt; 4  4     black</span>
<span class="co">#&gt; 5  5 caucasian</span>
<span class="co">#&gt; 6  6     black</span></code></pre></div>
</div>
<div id="factors" class="section level2">
<h2><span class="header-section-number">2.10</span> Factors</h2>
<p>Factors in R are a tricky beast and I haven’t spent as much time as I’d like writing up this section so I will give the cliff notes.</p>
<ul>
<li>unordered factors cannot be sorted</li>
<li>to convert a numeric factor back to a numeric use the command <code>as.numeric(as.character(factor))</code></li>
<li>the as.numeric(as.character(…)) idiom is so prevalent, a convenient wrapper in <code>PKPDmisc</code> is provided: <code>as_numeric()</code></li>
<li>factors have a couple key arguments when dealing with them <code>levels</code> - are the values the factor takes <code>labels</code> - are an optional value of labels that can be used to name the factors</li>
</ul>
<p>This will be hopefully a good example for us to examine.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">Theoph3 &lt;-<span class="st"> </span>Theoph[<span class="kw">with</span>(Theoph, <span class="kw">as_numeric</span>(Subject) &lt;<span class="st"> </span><span class="dv">4</span>),]
<span class="kw">within</span>(Theoph3, {id &lt;-<span class="st"> </span><span class="kw">factor</span>(Subject, 
                                <span class="dt">levels =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), 
                                <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;John&quot;</span>, <span class="st">&quot;Mary&quot;</span>, <span class="st">&quot;Joe&quot;</span>)
                                )
                subnum &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(Subject)
                subcharnum &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(<span class="kw">as.character</span>(Subject))
                id2 &lt;-<span class="st"> </span><span class="kw">factor</span>(subnum, 
                                <span class="dt">levels =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), 
                                <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;John&quot;</span>, <span class="st">&quot;Mary&quot;</span>, <span class="st">&quot;Joe&quot;</span>)
                                )
                id3 &lt;-<span class="st"> </span><span class="kw">factor</span>(subnum, 
                                <span class="dt">levels =</span> <span class="kw">c</span>(<span class="dv">11</span>, <span class="dv">6</span>, <span class="dv">5</span>), 
                                <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;John&quot;</span>, <span class="st">&quot;Mary&quot;</span>, <span class="st">&quot;Joe&quot;</span>)
                                )
              
            }

)
<span class="co">#&gt;    Subject   Wt Dose  Time  conc  id3  id2 subcharnum subnum   id</span>
<span class="co">#&gt; 1        1 79.6 4.02  0.00  0.74 John &lt;NA&gt;          1     11 John</span>
<span class="co">#&gt; 2        1 79.6 4.02  0.25  2.84 John &lt;NA&gt;          1     11 John</span>
<span class="co">#&gt; 3        1 79.6 4.02  0.57  6.57 John &lt;NA&gt;          1     11 John</span>
<span class="co">#&gt; 4        1 79.6 4.02  1.12 10.50 John &lt;NA&gt;          1     11 John</span>
<span class="co">#&gt; 5        1 79.6 4.02  2.02  9.66 John &lt;NA&gt;          1     11 John</span>
<span class="co">#&gt; 6        1 79.6 4.02  3.82  8.58 John &lt;NA&gt;          1     11 John</span>
<span class="co">#&gt; 7        1 79.6 4.02  5.10  8.36 John &lt;NA&gt;          1     11 John</span>
<span class="co">#&gt; 8        1 79.6 4.02  7.03  7.47 John &lt;NA&gt;          1     11 John</span>
<span class="co">#&gt; 9        1 79.6 4.02  9.05  6.89 John &lt;NA&gt;          1     11 John</span>
<span class="co">#&gt; 10       1 79.6 4.02 12.12  5.94 John &lt;NA&gt;          1     11 John</span>
<span class="co">#&gt; 11       1 79.6 4.02 24.37  3.28 John &lt;NA&gt;          1     11 John</span>
<span class="co">#&gt; 12       2 72.4 4.40  0.00  0.00 Mary &lt;NA&gt;          2      6 Mary</span>
<span class="co">#&gt; 13       2 72.4 4.40  0.27  1.72 Mary &lt;NA&gt;          2      6 Mary</span>
<span class="co">#&gt; 14       2 72.4 4.40  0.52  7.91 Mary &lt;NA&gt;          2      6 Mary</span>
<span class="co">#&gt; 15       2 72.4 4.40  1.00  8.31 Mary &lt;NA&gt;          2      6 Mary</span>
<span class="co">#&gt; 16       2 72.4 4.40  1.92  8.33 Mary &lt;NA&gt;          2      6 Mary</span>
<span class="co">#&gt; 17       2 72.4 4.40  3.50  6.85 Mary &lt;NA&gt;          2      6 Mary</span>
<span class="co">#&gt; 18       2 72.4 4.40  5.02  6.08 Mary &lt;NA&gt;          2      6 Mary</span>
<span class="co">#&gt; 19       2 72.4 4.40  7.03  5.40 Mary &lt;NA&gt;          2      6 Mary</span>
<span class="co">#&gt; 20       2 72.4 4.40  9.00  4.55 Mary &lt;NA&gt;          2      6 Mary</span>
<span class="co">#&gt; 21       2 72.4 4.40 12.00  3.01 Mary &lt;NA&gt;          2      6 Mary</span>
<span class="co">#&gt; 22       2 72.4 4.40 24.30  0.90 Mary &lt;NA&gt;          2      6 Mary</span>
<span class="co">#&gt; 23       3 70.5 4.53  0.00  0.00  Joe &lt;NA&gt;          3      5  Joe</span>
<span class="co">#&gt; 24       3 70.5 4.53  0.27  4.40  Joe &lt;NA&gt;          3      5  Joe</span>
<span class="co">#&gt; 25       3 70.5 4.53  0.58  6.90  Joe &lt;NA&gt;          3      5  Joe</span>
<span class="co">#&gt; 26       3 70.5 4.53  1.02  8.20  Joe &lt;NA&gt;          3      5  Joe</span>
<span class="co">#&gt; 27       3 70.5 4.53  2.02  7.80  Joe &lt;NA&gt;          3      5  Joe</span>
<span class="co">#&gt; 28       3 70.5 4.53  3.62  7.50  Joe &lt;NA&gt;          3      5  Joe</span>
<span class="co">#&gt; 29       3 70.5 4.53  5.08  6.20  Joe &lt;NA&gt;          3      5  Joe</span>
<span class="co">#&gt; 30       3 70.5 4.53  7.07  5.30  Joe &lt;NA&gt;          3      5  Joe</span>
<span class="co">#&gt; 31       3 70.5 4.53  9.00  4.90  Joe &lt;NA&gt;          3      5  Joe</span>
<span class="co">#&gt; 32       3 70.5 4.53 12.15  3.70  Joe &lt;NA&gt;          3      5  Joe</span>
<span class="co">#&gt; 33       3 70.5 4.53 24.17  1.05  Joe &lt;NA&gt;          3      5  Joe</span></code></pre></div>
<p>There are a number of ways of controlling and examining factor levels</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## generate data
x =<span class="st"> </span><span class="kw">factor</span>(<span class="kw">sample</span>(letters[<span class="dv">1</span>:<span class="dv">5</span>],<span class="dv">100</span>, <span class="dt">replace=</span><span class="ot">TRUE</span>))

<span class="kw">print</span>(<span class="kw">levels</span>(x))  ## This will show the levels of x are &quot;Levels: a b c d e&quot;
<span class="co">#&gt; [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot;</span>

## To reorder the levels:
## note, if x is not a factor use levels(factor(x))
x =<span class="st"> </span><span class="kw">factor</span>(x,<span class="kw">levels</span>(x)[<span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">1</span>:<span class="dv">3</span>)])

<span class="kw">print</span>(<span class="kw">levels</span>(x))  ## Now &quot;Levels: d e a b c&quot;
<span class="co">#&gt; [1] &quot;d&quot; &quot;e&quot; &quot;a&quot; &quot;b&quot; &quot;c&quot;</span></code></pre></div>
<div id="your-task" class="section level4">
<h4><span class="header-section-number">2.10.0.1</span> Your task</h4>
<ul>
<li>Using Theoph dataset, relevel the <code>Subject</code> column so the factor levels correspond to the labels</li>
</ul>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="intro-to-data-manipulation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="control-structures.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/dpastoor/r-pharmsciences/edit/master/core-r.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
